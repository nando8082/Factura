<ion-header>
  <ion-toolbar>
    <ion-button (click)="cancelar()" slot="start" class="btn-titulo" color="secondary"
      [routerLink]="['/principal']"><ion-icon name="arrow-back-outline"></ion-icon></ion-button>
    <ion-button (click)="siguiente()" slot="end" class="btn-titulo" color="secondary"
      [routerLink]="['/principal']"><ion-icon name="arrow-forward-circle-outline"></ion-icon></ion-button>
    <ion-title>Detalle</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-card color="medium" id="cotenido" class="crearFactura">
    <h1 class="ion-text-center">Agregar Productos</h1>
    <form [formGroup]="user">
      <ion-card>
        <ion-select #seer placeholder="Seleccionar" class="input1" formControlName="producto" id="producto"
          (ionChange)="handleChange($event)" required>
          <ion-select-option *ngFor="let servicio of servicioT"
            [value]="servicio">{{servicio.descripcion}}</ion-select-option>
        </ion-select>
      </ion-card>
      <ion-card>

        <ion-item>
          <ion-label position="floating">Precio Unitario</ion-label>
          <ion-input #precioUnitario formControlName="precioUnitario" id="precioUnitario" type="number"
            placeholder="Enter text" required value="{{serviciof.precioUnitario}}"></ion-input>
        </ion-item>
      </ion-card>

      <ion-card>
        <ion-item>
          <ion-label position="floating">Cantidad</ion-label>
          <ion-input #cantidad formControlName="cantidad1" id="cantidad1" type="number"
            placeholder="Ingrese la cantidad" required></ion-input>
        </ion-item>
      </ion-card>

      <ion-button class="button" shape="round"
        (click)="agregarDetalles(+precioUnitario.value!,serviciof.id, +cantidad.value!, serviciof.descripcion)"
        color="secondary">Agregar</ion-button>


    </form>
    <ion-card>
      <ion-card-header>
        <ion-card-title class="ion-text-center">Detalles</ion-card-title>

      </ion-card-header>
      <ion-card *ngFor="let detalles of det">


        <ion-item lines="lines">
          <ion-thumbnail slot="start">

            <img src="https://cdn-icons-png.flaticon.com/128/8947/8947916.png" />
          </ion-thumbnail>
          <ion-list>

            <ion-label color="dark">Producto: {{detalles.descripcion}}</ion-label>

            <ion-label color="dark">Pecio U: {{detalles.precioUnitario}} $</ion-label>

            <ion-label color="dark">Cantidad: {{detalles.cantidad}}</ion-label>
            <ion-label color="dark">Total: {{detalles.total}} $</ion-label>
          </ion-list>
        </ion-item>



      </ion-card>
      <ion-item lines="lines">

        <ion-list>

          <ion-label color="dark">Subtotal: {{subtotal}} $</ion-label>


          <ion-label color="dark">Iva: {{impuesto}} $</ion-label>


          <ion-label color="dark">Total: {{totalF}} $</ion-label>
        </ion-list>
      </ion-item>
    </ion-card>


  </ion-card>

</ion-content>